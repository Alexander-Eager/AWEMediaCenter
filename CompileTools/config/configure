qmake -project -o AWEMC.pro
echo "" >> "AWEMC.pro"
echo "DESTDIR = bin/" >> AWEMC.pro
if [[ "$OSTYPE" = "darwin"* ]]; then
	echo "QMAKE_CXXFLAGS += -mmacosx-version-min=10.7 -std=gnu0x -stdlib=libc+" >> AWEMC.pro
else
	echo "QMAKE_CXXFLAGS += -stdlib=libc+"
fi
echo "CONFIG += c++11" >> AWEMC.pro
echo "LIBS += -lcurl" >> AWEMC.pro
echo "QT += widgets" >> AWEMC.pro
echo "CONFIG += debug" >> AWEMC.pro
echo "DEFINES *= QT_USE_QSTRINGBUILDER" >> AWEMC.pro

qmake -makefile -o Makefile AWEMC.pro
echo "" >> Makefile
echo "#### This is generated by ./configure, for installation" >> Makefile
echo "" >> Makefile
echo "install:" >> Makefile
case "$OSTYPE" in
	"darwin"*)
		echo -e "\tmkdir ~/.awemc/ || true" >> Makefile
		echo -e "\tcp -r ../OS_X_DEFAULT_DATA/* ~/.awemc/" >> Makefile
		echo -e "\tcp -r bin/AWEMC.app /Applications/" >> Makefile
		;;
	"linux-gnu")
		echo -e "\tmkdir ~/.awemc/" >> Makefile
		echo -e "\tcp -r LINUX_DEFAULT_DATA/ ~/.awemc/" >> Makefile
		echo -e "\tcp AWEMC /usr/bin/" >> Makefile
		;;
	"*")
		echo -e "\tERROR: No installation method for this OS" >> Makefile
		;;
esac
